# egg-examples

日常在 eggjs 上进行业务开发时，将通用配置或者方法进行沉淀，方便日后使用，提高开发效率

## 核心功能

1. 集成 Mysql ，实现 Model 层和 Dao 层
2. 集成基于 JWT 的认证体系
3. 集成正常和异常的响应体处理

## 待办事项

- [] 请求链路日志集成
- [] 性能监控平台接入

## 备注

1. 添加 vscode -- egg 插件，主要使用以下功能
   1. debug:需要去除 --inspect-brk 才能本地调试
   2. service , controller 代码模板
2. npx sequelize 指令最好不好使用，缺点如下：
   1. 每个表还需要单独编写，不能直接使用 model 文件创建
   2. 表会出现无法同步的情况
3. redis 锁需要注意如下内容：
   1. 保证 redis 操作的原子性
   2. 解决业务未完成，但是锁过期，被其他客户端获取，从而造成互斥锁
   3. lock 的时候如果发现已经锁定，需要设置等待机制
   4. 锁的过期时间需要添加随机性，防止一次性锁全部失效
